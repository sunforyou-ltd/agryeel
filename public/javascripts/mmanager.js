//---------------------------------------------------------------------------------------------------------------
//- オブジェクト管理用変数
//---------------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------------
//- マテリアライズオブジェクト初期化リスナー
//---------------------------------------------------------------------------------------------------------------
document.addEventListener('DOMContentLoaded', function() {

  //------------------------------------------------------------------------------------------------------------------
  //- DatePickerの自動生成
  //------------------------------------------------------------------------------------------------------------------
  //日付項目に対してDatePickerを生成
  startDateP();
  //------------------------------------------------------------------------------------------------------------------
  //- TimePickerの自動生成
  //------------------------------------------------------------------------------------------------------------------
  //時間項目に対してTimePickerを生成
  startTimeP();

  //------------------------------------------------------------------------------------------------------------------
  //- FABの自動生成
  //------------------------------------------------------------------------------------------------------------------
  //FABに対してFAB使用宣言
  startFAB();

});
//---------------------------------------------------------------------------------------------------------------
//- 日付選択カレンダーの使用開始宣言
//---------------------------------------------------------------------------------------------------------------
function startDateP() {
  //---------------------------------------------------------------------------------------------------------------
  //- 日付選択カレンダーの初期化
  //---------------------------------------------------------------------------------------------------------------
  var elems = document.querySelectorAll('.datepicker');

  var monthsFull  = [ '１月', '２月', '３月', '４月', '５月', '６月', '７月', '８月', '９月', '１０月', '１１月', '１２月' ];
  var monthsShort   = [ '１', '２', '３', '４', '５', '６', '７', '８', '９', '１０', '１１', '１２' ];
  var weekdaysFull  = [ '日', '月', '火', '水', '木', '金', '土' ];
  var weekdaysShort = [ '日', '月', '火', '水', '木', '金', '土' ];
  var weekdaysLetter = [ '日', '月', '火', '水', '木', '金', '土' ];
  var i18options = { months: monthsFull, monthsShort: monthsShort, weekdays: weekdaysFull, weekdaysShort: weekdaysShort, weekdaysAbbrev: weekdaysLetter, done:""};

  var options = {yearRange:5 , format:'yyyy/mm/dd', i18n: i18options, setDefaultDate:true, autoClose:true};
  var instances = M.Datepicker.init(elems, options);

  var datePs = [];

  var idx = 0;
  for (var idx = 0; idx < elems.length; idx++) {
    var elemnt = elems[idx];
    var json = { id:elemnt.id, obj:instances[idx]};
    datePs.push(json);
  }
}
//---------------------------------------------------------------------------------------------------------------
//- 日付選択カレンダーの日付を設定する
//---------------------------------------------------------------------------------------------------------------
function setDatePs(id, date) {
  //日付項目テキストボックス
  var dateobj = $(id);
  if (dateobj != undefined) {
    dateobj.val(date);
  }
  //DatePickerエレメント
  var elemnt = getDatePs(id);
  if (elemnt != null) {
    elemnt.setDate(date);
  }
}
//---------------------------------------------------------------------------------------------------------------
//- 日付選択カレンダーの保存変数からオブジェクトを取得する
//---------------------------------------------------------------------------------------------------------------
function getDatePs(id) {
  return M.Datepicker.getInstance($(id));
}
//---------------------------------------------------------------------------------------------------------------
//- 時間選択ピッカーの使用開始宣言
//---------------------------------------------------------------------------------------------------------------
function startTimeP() {
  //---------------------------------------------------------------------------------------------------------------
  //- 時間選択ピッカーの初期化
  //---------------------------------------------------------------------------------------------------------------
  var elems = document.querySelectorAll('.timepicker');

  var options = {defaultTime: 'now', twelveHour: false, autoClose: false};
  var instances = M.Timepicker.init(elems, options);

  var timePs = [];

  var idx = 0;
  for (var idx = 0; idx < elems.length; idx++) {
    var elemnt = elems[idx];
    var json = { id:elemnt.id, obj:instances[idx]};
    timePs.push(json);
  }
}
//---------------------------------------------------------------------------------------------------------------
//- FABの使用開始宣言
//---------------------------------------------------------------------------------------------------------------
function startFAB() {
//---------------------------------------------------------------------------------------------------------------
//- FABの初期化
//---------------------------------------------------------------------------------------------------------------
  $('.fixed-action-btn').floatingActionButton({
    hoverEnabled: false
  });
}
